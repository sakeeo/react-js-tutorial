{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect } from 'react';\nimport axios from 'axios';\nexport default function MovieSearch(query, pageNumber) {\n  _s();\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [books, setBooks] = useState([]);\n  const [hasMore, setHasMore] = useState(false);\n  useEffect(() => {\n    setLoading(true);\n    setError(false);\n    let cancel;\n    axios({\n      method: 'get',\n      url: 'http://openlibrary.org/search.json',\n      params: {\n        q: query,\n        page: pageNumber\n      },\n      cancelToken: new axios.CancelToken(c => cancel = c)\n    }).then(res => {\n      setBooks(prevBooks => {\n        return [...new set([...prevBooks, res.data.docs.map(b => b.title)])];\n      });\n      setHasMore(res.data.length > 0);\n      setLoading(false);\n    }).catch(e => {\n      if (axios.isCancel(e)) return;\n      setError(true);\n    });\n    return () => cancel();\n  }, [query, pageNumber]);\n  return {\n    loading,\n    error,\n    books,\n    hasMore\n  };\n}\n\n_s(MovieSearch, \"B6iXj+8s6wQCFlPaxevP2aTwOnU=\");\n\n_c = MovieSearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieSearch\");","map":{"version":3,"sources":["/home/sakeeo/Dev/github/react-js-tutorial/src/Tutorial/MovieSerach.js"],"names":["useEffect","axios","MovieSearch","query","pageNumber","loading","setLoading","useState","error","setError","books","setBooks","hasMore","setHasMore","cancel","method","url","params","q","page","cancelToken","CancelToken","c","then","res","prevBooks","set","data","docs","map","b","title","length","catch","e","isCancel"],"mappings":";;AAAA,SAAQA,SAAR,QAAwB,OAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,WAAT,CAAqBC,KAArB,EAA2BC,UAA3B,EAAuC;AAAA;;AAEpD,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBC,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBF,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACG,KAAD,EAAQC,QAAR,IAAoBJ,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACK,OAAD,EAAUC,UAAV,IAAwBN,QAAQ,CAAC,KAAD,CAAtC;AAEAP,EAAAA,SAAS,CAAC,MAAK;AACbM,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAG,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACA,QAAIK,MAAJ;AACAb,IAAAA,KAAK,CAAC;AACJc,MAAAA,MAAM,EAAI,KADN;AAEJC,MAAAA,GAAG,EAAO,oCAFN;AAGJC,MAAAA,MAAM,EAAI;AAACC,QAAAA,CAAC,EAACf,KAAH;AAAUgB,QAAAA,IAAI,EAACf;AAAf,OAHN;AAIJgB,MAAAA,WAAW,EAAC,IAAInB,KAAK,CAACoB,WAAV,CAAsBC,CAAC,IAAIR,MAAM,GAAGQ,CAApC;AAJR,KAAD,CAAL,CAKGC,IALH,CAKQC,GAAG,IAAE;AACXb,MAAAA,QAAQ,CAACc,SAAS,IAAI;AACpB,eAAO,CAAC,GAAG,IAAIC,GAAJ,CAAQ,CAAC,GAAGD,SAAJ,EAAcD,GAAG,CAACG,IAAJ,CAASC,IAAT,CAAcC,GAAd,CAAkBC,CAAC,IAAIA,CAAC,CAACC,KAAzB,CAAd,CAAR,CAAJ,CAAP;AACD,OAFO,CAAR;AAGAlB,MAAAA,UAAU,CAACW,GAAG,CAACG,IAAJ,CAASK,MAAT,GAAkB,CAAnB,CAAV;AACA1B,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAXD,EAWG2B,KAXH,CAWSC,CAAC,IAAI;AACZ,UAAGjC,KAAK,CAACkC,QAAN,CAAeD,CAAf,CAAH,EAAsB;AACtBzB,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,KAdD;AAeA,WAAO,MAAMK,MAAM,EAAnB;AACD,GApBQ,EAoBP,CAACX,KAAD,EAAOC,UAAP,CApBO,CAAT;AAsBA,SAAO;AAACC,IAAAA,OAAD;AAASG,IAAAA,KAAT;AAAeE,IAAAA,KAAf;AAAqBE,IAAAA;AAArB,GAAP;AACD;;GA9BuBV,W;;KAAAA,W","sourcesContent":["import {useEffect} from 'react'\nimport axios from 'axios';\n\nexport default function MovieSearch(query,pageNumber) {\n  \n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(false)\n  const [books, setBooks] = useState([])\n  const [hasMore, setHasMore] = useState(false)\n  \n  useEffect(()=> {\n    setLoading(true)\n    setError(false)\n    let cancel\n    axios({\n      method  : 'get',\n      url     : 'http://openlibrary.org/search.json',\n      params  : {q:query, page:pageNumber},\n      cancelToken:new axios.CancelToken(c => cancel = c )\n    }).then(res=>{\n      setBooks(prevBooks => {\n        return [...new set([...prevBooks,res.data.docs.map(b => b.title)])]\n      })\n      setHasMore(res.data.length > 0)\n      setLoading(false)\n    }).catch(e => {\n      if(axios.isCancel(e)) return\n      setError(true)\n    })\n    return () => cancel()\n  },[query,pageNumber])\n  \n  return {loading,error,books,hasMore}\n}\n"]},"metadata":{},"sourceType":"module"}